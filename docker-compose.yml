services:
  jobsentinel-linkedin:
    build: .
    command: ["/app/scripts/start-xvfb.sh", "python", "-m", "core.controller", "--platforms", "linkedin"]
    env_file:
      - .env
    environment:
      - JOBSENTINEL_PLATFORMS=linkedin
    volumes:
      - ./sessions:/app/sessions
      - ./data:/app/data
  jobsentinel-naukri:
    build: .
    command: ["/app/scripts/start-xvfb.sh", "python", "-m", "core.controller", "--platforms", "naukri"]
    env_file:
      - .env
    environment:
      - JOBSENTINEL_PLATFORMS=naukri
    volumes:
      - ./sessions:/app/sessions
      - ./data:/app/data
  jobsentinel-indeed:
    build: .
    command: ["/app/scripts/start-xvfb.sh", "python", "-m", "core.controller", "--platforms", "indeed"]
    env_file:
      - .env
    environment:
      - JOBSENTINEL_PLATFORMS=indeed
    volumes:
      - ./sessions:/app/sessions
      - ./data:/app/data
  dashboard:
    build: .
    command: ["python", "-m", "dashboard.app"]
    env_file:
      - .env
    volumes:
      - ./sessions:/app/sessions
      - ./data:/app/data
      - /var/run/docker.sock:/var/run/docker.sock
    ports:
      - "5000:5000"
